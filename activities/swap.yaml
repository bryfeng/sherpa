name: swap
display_name: "Token Swap"
category: "exchange"
version: "1.0"

description: |
  Execute a token swap on a single chain using the best available liquidity.
  Supports EVM chains via Relay and Solana via Jupiter.

inputs:
  token_in:
    type: token_reference
    required: true
    description: "Token to sell"
  token_out:
    type: token_reference
    required: true
    description: "Token to buy"
  amount:
    type: amount
    required: true
    description: "Amount to swap (in token_in units or USD)"
  chain:
    type: chain_reference
    required: false
    default: null
    description: "Chain to execute on (inferred from tokens if not specified)"

guardrails:
  max_slippage_bps: 100
  max_price_impact_bps: 300
  require_approval_above_usd: 5000.0
  min_output_amount_pct: 95.0

execution:
  providers:
    evm: relay
    solana: jupiter
  quote_expiry_seconds: 60
  retry_on_failure: true
  max_retries: 2

detection_keywords:
  - swap
  - exchange
  - trade
  - convert
  - buy
  - sell
